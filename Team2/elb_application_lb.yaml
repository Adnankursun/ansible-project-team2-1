---
- name: Application Load Balancer
  hosts: localhost
  gather_facts: no
  vars_files:
    - vars_file.yaml
  ignore_errors: yes
  tasks:

  - elb_application_lb:
      name: myelb
      security_groups: launch-wizard-1
      region: eu-west-2
      subnets:
        - subnet-0b4b71fdd6338c402
        - subnet-08a47152982b03821
        - subnet-00bcbb7fdfec17773
      listeners:
        - Protocol: HTTP # Required. The protocol for connections from clients to the load balancer (HTTP or HTTPS) (case-sensitive).
          Port: 80
          DefaultActions:
            - Type: forward # Required.
              TargetGroupName: mytargetgroup
      state: present